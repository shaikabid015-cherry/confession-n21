<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Messages - ConfessHub</title>
    <link rel="stylesheet" href="styles/main.css">
    <link rel="stylesheet" href="styles/messages.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- Navigation Bar with Logout -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="logo">
                <i class="fas fa-heart"></i>
                <span>ConfessHub</span>
            </div>
            <div class="nav-options">
                <button id="theme-toggle" class="theme-btn" title="Toggle dark mode">
                    <i class="fas fa-moon"></i>
                </button>
                <button id="logout-btn" class="logout-btn" title="Logout">
                    <i class="fas fa-sign-out-alt"></i> Logout
                </button>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="container">
        <!-- User Profile Section -->
        <div class="profile-section">
            <div class="profile-header">
                <div class="profile-pic-container">
                    <img id="profile-pic" src="" alt="Profile Picture" class="profile-pic">
                    <div class="profile-online"></div>
                </div>
                <div class="profile-info">
                    <h1 id="user-name">Loading...</h1>
                    <p id="user-id" class="user-id">ID: </p>
                    <p id="user-email" class="user-email"></p>
                </div>
            </div>
            
            <!-- Statistics Cards -->
            <div class="stats-container">
                <div class="stat-card">
                    <div class="stat-icon received">
                        <i class="fas fa-envelope"></i>
                    </div>
                    <h3 id="total-messages">0</h3>
                    <p>Total Messages</p>
                </div>
                <div class="stat-card">
                    <div class="stat-icon unread">
                        <i class="fas fa-envelope-open"></i>
                    </div>
                    <h3 id="unread-messages">0</h3>
                    <p>Unread</p>
                </div>
                <div class="stat-card">
                    <div class="stat-card">
                        <div class="stat-icon sent">
                            <i class="fas fa-paper-plane"></i>
                        </div>
                        <h3 id="sent-confessions">0</h3>
                        <p>Sent Confessions</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Messages Section -->
        <div class="messages-section">
            <div class="section-header">
                <h2><i class="fas fa-inbox"></i> Received Confessions</h2>
                <div class="section-actions">
                    <button id="mark-all-read" class="action-btn">
                        <i class="fas fa-check-double"></i> Mark All Read
                    </button>
                    <button id="refresh-messages" class="action-btn">
                        <i class="fas fa-sync-alt"></i> Refresh
                    </button>
                </div>
            </div>
            
            <!-- Message Filter Tabs -->
            <div class="filter-tabs">
                <button class="filter-btn active" data-filter="all">All Messages</button>
                <button class="filter-btn" data-filter="unread">Unread</button>
                <button class="filter-btn" data-filter="read">Read</button>
                <button class="filter-btn" data-filter="favorite">Favorites</button>
            </div>
            
            <!-- Messages List -->
            <div class="messages-list" id="messages-list">
                <!-- Messages will be loaded here dynamically -->
                <div class="empty-state">
                    <div class="empty-icon">
                        <i class="fas fa-envelope-open-text"></i>
                    </div>
                    <h3>No messages yet</h3>
                    <p>When someone sends you a confession, it will appear here.</p>
                </div>
            </div>
        </div>
    </main>

    <!-- Floating Write Button -->
    <button id="floating-write-btn" class="floating-write-btn" title="Write Confession">
        <i class="fas fa-pen"></i>
    </button>

    <!-- Confession Modal (Hidden by default) -->
    <div id="confession-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2><i class="fas fa-heart"></i> Write a Confession</h2>
                <button class="close-modal">&times;</button>
            </div>
            <div class="modal-body">
                <form id="confession-form">
                    <div class="input-group">
                        <label for="to-id">
                            <i class="fas fa-user"></i> To (User ID)
                        </label>
                        <input type="text" id="to-id" placeholder="Enter recipient's ID (e.g., N210001)" required>
                        <div class="input-hint">Enter the ID of the person you want to confess to</div>
                    </div>
                    
                    <div class="input-group">
                        <label for="confession-subject">
                            <i class="fas fa-tag"></i> Subject
                        </label>
                        <input type="text" id="confession-subject" placeholder="What's this about?" required>
                    </div>
                    
                    <div class="input-group">
                        <label for="confession-message">
                            <i class="fas fa-comment"></i> Your Confession
                        </label>
                        <textarea id="confession-message" placeholder="Write your heart out..." rows="6" required></textarea>
                        <div class="char-counter">
                            <span id="char-count">0</span>/1000 characters
                        </div>
                    </div>
                    
                    <div class="form-options">
                        <div class="option-checkbox">
                            <input type="checkbox" id="send-email" checked>
                            <label for="send-email">Send email notification to recipient</label>
                        </div>
                        <div class="option-checkbox">
                            <input type="checkbox" id="anonymous-send">
                            <label for="anonymous-send">Send anonymously</label>
                        </div>
                    </div>
                    
                    <div class="modal-actions">
                        <button type="button" class="cancel-btn close-modal">Cancel</button>
                        <button type="submit" class="send-btn">
                            <i class="fas fa-paper-plane"></i> Send Confession
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Success Modal -->
    <div id="success-modal" class="modal">
        <div class="modal-content success-modal">
            <div class="modal-header">
                <h2><i class="fas fa-check-circle"></i> Success!</h2>
                <button class="close-success-modal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="success-icon">
                    <i class="fas fa-heart"></i>
                </div>
                <h3>Confession Sent!</h3>
                <p>Your confession has been sent successfully. The recipient will be notified.</p>
                <button class="ok-btn close-success-modal">OK</button>
            </div>
        </div>
    </div>
    <!-- Add this in the body after the main content -->
    <button id="floating-write-btn" class="floating-write-btn" title="Write Confession">
        <i class="fas fa-pen"></i>
    </button>
    <!-- JavaScript Files -->
    <script src="scripts/main.js"></script>
    <script src="scripts/auth.js"></script>
    <script src="scripts/messages.js"></script>
</body>
</html>